(this["webpackJsonpmyflix-react-client"]=this["webpackJsonpmyflix-react-client"]||[]).push([[0],{107:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(25),c=a.n(s),i=(a(79),a(31)),o=a(27),l=a(71),d=(a(84),a(19)),u=a(20),j=a(22),h=a(21),m=a(15),b=a.n(m),v=a(11),p=a(8),O=a(14),x=a(34),f=a(37),g=a(74),y=a(9),k=a(56),w="SET_MOVIES",N="SET_FILTER",I="SET_USER";var C=a(6),P=a(1);var S=Object(o.b)(null,{setFilter:function(e){return{type:N,value:e}}})((function(e){return Object(P.jsx)(C.a.Control,{onChange:function(t){return e.setFilter(t.target.value)},value:e.visibilityFilter,placeholder:"Search for Title",style:{width:"20rem"},className:"mb-3"})})),B=a(7),L=(a(107),function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.movie;return Object(P.jsxs)(B.a,{style:{width:"16rem"},bg:"danger",text:"white",border:"primary",className:"mb-5",children:[Object(P.jsx)(B.a.Img,{variant:"top",width:256,height:414,src:e.ImagePath}),Object(P.jsxs)(B.a.Body,{children:[Object(P.jsx)(B.a.Title,{children:e.Title}),Object(P.jsx)(B.a.Text,{children:e.Description})]}),Object(P.jsx)(B.a.Footer,{children:Object(P.jsx)(v.Link,{to:"/movies/".concat(e._id),children:Object(P.jsx)(y.a,{variant:"light",block:!0,children:"Open"})})})]})}}]),a}(n.a.Component));var U=Object(o.b)((function(e){return{visibilityFilter:e.visibilityFilter}}))((function(e){var t=e.movies,a=e.visibilityFilter,r=t;return""!==a&&(r=t.filter((function(e){return e.Title.toLowerCase().includes(a.toLowerCase())}))),t?Object(P.jsxs)(O.a,{className:"ml-0 mr-0",children:[Object(P.jsx)(S,{visibilityFilter:a}),Object(P.jsx)(x.a,{className:"movies-list justify-content-around",children:r.map((function(e){return Object(P.jsx)(L,{movie:e},e._id)}))})]}):Object(P.jsx)("div",{className:"main-view"})})),E=a(30);function F(e){var t=Object(r.useState)(""),a=Object(E.a)(t,2),n=a[0],s=a[1],c=Object(r.useState)(""),i=Object(E.a)(c,2),o=i[0],l=i[1],d=Object(r.useState)(""),u=Object(E.a)(d,2),j=u[0],h=u[1],m=Object(r.useState)(""),v=Object(E.a)(m,2),p=v[0],x=v[1];return Object(P.jsxs)(O.a,{children:[Object(P.jsx)("h1",{children:"Sign Up to MARVELIX"}),Object(P.jsxs)(C.a,{children:[Object(P.jsxs)(C.a.Group,{controlId:"formBasicUsername",children:[Object(P.jsx)(C.a.Label,{children:"Username: "}),Object(P.jsx)(C.a.Control,{type:"text",value:n,onChange:function(e){return s(e.target.value)},placeholder:"Enter Username"})]}),Object(P.jsxs)(C.a.Group,{controlId:"formBasicPassword",children:[Object(P.jsx)(C.a.Label,{children:"Password: "}),Object(P.jsx)(C.a.Control,{type:"password",value:o,onChange:function(e){return l(e.target.value)},placeholder:"Enter Password"})]}),Object(P.jsxs)(C.a.Group,{controlId:"formBasicEmail",children:[Object(P.jsx)(C.a.Label,{children:"Email: "}),Object(P.jsx)(C.a.Control,{type:"text",value:j,onChange:function(e){return h(e.target.value)},placeholder:"Enter Email"})]}),Object(P.jsxs)(C.a.Group,{children:[Object(P.jsx)(C.a.Label,{children:"Enter Date of Birth: "}),Object(P.jsx)(C.a.Control,{type:"text",value:p,onChange:function(e){return x(e.target.value)},placeholder:"MM-DD-YYYY"})]})]}),Object(P.jsx)(y.a,{type:"submit",variant:"info",onClick:function(e){e.preventDefault(),b.a.post("https://marvelix.herokuapp.com/users",{Username:n,Password:o,Email:j,Birthday:p}).then((function(e){var t=e.data;console.log(t),window.open("/","_self")})).catch((function(e){console.log("error registering the user")}))},children:"Sign Up"})]})}function D(e){var t=Object(r.useState)(""),a=Object(E.a)(t,2),n=a[0],s=a[1],c=Object(r.useState)(""),i=Object(E.a)(c,2),o=i[0],l=i[1];return Object(P.jsxs)(O.a,{children:[Object(P.jsx)("h1",{children:"Please log in to MARVELIX"}),Object(P.jsxs)(C.a,{children:[Object(P.jsxs)(C.a.Group,{controlId:"formBasicUsername",children:[Object(P.jsx)(C.a.Label,{children:"Username: "}),Object(P.jsx)(C.a.Control,{type:"text",value:n,onChange:function(e){return s(e.target.value)},placeholder:"Enter Username"})]}),Object(P.jsxs)(C.a.Group,{controlId:"formBasicPassword",children:[Object(P.jsx)(C.a.Label,{children:"Password: "}),Object(P.jsx)(C.a.Control,{type:"password",value:o,onChange:function(e){return l(e.target.value)},placeholder:"Enter Password"})]})]}),Object(P.jsx)(y.a,{type:"submit",variant:"success",onClick:function(t){t.preventDefault(),b.a.post("https://marvelix.herokuapp.com/login",{Username:n,Password:o}).then((function(t){var a=t.data;e.onLoggedIn(a)})).catch((function(e){console.log("no such user")}))},children:"Log In"}),Object(P.jsx)(v.Link,{to:"/register",children:Object(P.jsx)(y.a,{variant:"link",className:"button-register",children:"Create new Account"})})]})}var T=a(36),M=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).addToFavorites=function(t){t.preventDefault();var a=localStorage.getItem("token"),r=localStorage.getItem("user");b.a.post("https://marvelix.herokuapp.com/users/".concat(r,"/Favorites/").concat(e.props.movie._id),{},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){alert("".concat(e.props.movie.Title," added to favorites"))})).catch((function(e){console.log(e)}))},e.state={},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.movie;return e?Object(P.jsxs)(x.a,{sm:1,md:2,children:[Object(P.jsx)(T.a,{children:Object(P.jsx)("img",{width:256,height:414,className:"movie-poster",src:e.ImagePath,alt:"Movie Poster"})}),Object(P.jsxs)(T.a,{children:[Object(P.jsx)("h3",{children:e.Title}),Object(P.jsx)("p",{className:"movie-description",children:e.Description}),Object(P.jsxs)("p",{className:"movie-phase",children:[Object(P.jsx)("span",{className:"label",children:"Phase: "}),Object(P.jsx)("span",{className:"value",children:Object(P.jsx)(v.Link,{to:"/phases/".concat(e.Phase.Name),children:e.Phase.Name})})]}),Object(P.jsxs)("p",{className:"movie-director",children:[Object(P.jsx)("span",{className:"label",children:"Director: "}),Object(P.jsx)("span",{className:"value",children:Object(P.jsx)(v.Link,{to:"/directors/".concat(e.Director.Name),children:e.Director.Name})})]}),Object(P.jsx)(y.a,{onClick:function(){return window.open("/","_self")},variant:"secondary",className:"mr-3",children:"Back"}),Object(P.jsx)(y.a,{onClick:this.addToFavorites,variant:"success",children:"Add to favorites"})]})]}):null}}]),a}(n.a.Component),A=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.director;return e?Object(P.jsx)(O.a,{className:"director-view",children:Object(P.jsxs)(B.a,{style:{width:"30rem"},className:"phase-card",bg:"primary",text:"white",border:"primary",children:[Object(P.jsx)(B.a.Header,{children:e.Name}),Object(P.jsxs)(B.a.Body,{children:[Object(P.jsxs)(B.a.Text,{children:[Object(P.jsx)("p",{children:e.Bio}),Object(P.jsxs)("p",{children:["Born: ",e.Birth]})]}),Object(P.jsx)(v.Link,{to:"/",children:Object(P.jsx)(y.a,{variant:"secondary",className:"button-back",children:"All Movies"})})]})]})}):null}}]),a}(n.a.Component),_=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.phase;return e?Object(P.jsx)(O.a,{className:"phase-view",children:Object(P.jsxs)(B.a,{style:{width:"30rem"},className:"phase-card",bg:"primary",text:"white",border:"primary",children:[Object(P.jsxs)(B.a.Header,{children:["Phase ",e.Name]}),Object(P.jsxs)(B.a.Body,{children:[Object(P.jsx)(B.a.Text,{children:e.Description}),Object(P.jsx)(v.Link,{to:"/",children:Object(P.jsx)(y.a,{variant:"secondary",className:"button-back",children:"All Movies"})})]})]})}):null}}]),a}(n.a.Component),Y=a(112),G=a(111),R=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={Username:null,Password:null,Email:null,Birthday:null,Favorites:[],validated:null},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");null!==e&&this.getUser(e)}},{key:"getUser",value:function(e){var t=this,a=localStorage.getItem("user");b.a.get("https://marvelix.herokuapp.com/users/".concat(a),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){t.setState({Username:e.data.Username,Password:e.data.Password,Email:e.data.Email,Birthday:e.data.Birthday,Favorites:e.data.Favorites})})).catch((function(e){console.log(e)}))}},{key:"handleRemoveFavorite",value:function(e,t){var a=this;e.preventDefault();var r=localStorage.getItem("user"),n=localStorage.getItem("token");b.a.delete("https://marvelix.herokuapp.com/users/".concat(r,"/Favorites/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(){alert("Movie removed from favorites"),a.componentDidMount()})).catch((function(e){console.log(e)}))}},{key:"handleUpdate",value:function(e,t,a,r,n){var s=this;if(this.setState({validated:null}),!1===e.currentTarget.checkValidity())return e.preventDefault(),e.stopPropagation(),void this.setState({validated:!0});e.preventDefault();var c=localStorage.getItem("token"),i=localStorage.getItem("user");b()({method:"put",url:"https://marvelix.herokuapp.com/users/".concat(i),headers:{Authorization:"Bearer ".concat(c)},data:{Username:t||this.state.Username,Password:a||this.state.Password,Email:r||this.state.Email,Birthday:n||this.state.Birthday}}).then((function(e){alert("Saved Changes"),s.setState({Username:e.data.Username,Password:e.data.Password,Email:e.data.Email,Birthday:e.data.Birthday}),localStorage.setItem("user",s.state.Username),window.open("/users/".concat(i),"_self")})).catch((function(e){console.log(e)}))}},{key:"setUsername",value:function(e){this.Username=e}},{key:"setPassword",value:function(e){this.Password=e}},{key:"setEmail",value:function(e){this.Email=e}},{key:"setBirthday",value:function(e){this.Birthday=e}},{key:"handleDeregister",value:function(e){e.preventDefault();var t=localStorage.getItem("token"),a=localStorage.getItem("user");b.a.delete("https://marvelix.herokuapp.com/users/".concat(a),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(){localStorage.removeItem("user"),localStorage.removeItem("token"),alert("Your account has been deleted"),window.open("/","_self")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.Favorites,r=t.validated,n=localStorage.getItem("user"),s=this.props.movies;return Object(P.jsx)(O.a,{className:"profile-view",children:Object(P.jsxs)(Y.a,{defaultActiveKey:"profile",transition:!1,className:"profile-tabs",children:[Object(P.jsx)(G.a,{className:"tab-item",eventKey:"profile",title:"Profile",children:Object(P.jsxs)(O.a,{className:"profile-card",children:[Object(P.jsxs)("h3",{className:"profile-title m-2",style:{color:"blue"},children:[n,"'s Favorite Movies"]}),Object(P.jsxs)(x.a,{className:"ml-0 mr-0 justify-content-around",children:[0===a.length&&Object(P.jsx)("div",{className:"card-content",children:"You have no favorite movies."}),a.length>0&&s.map((function(t){if(t._id===a.find((function(e){return e===t._id})))return Object(P.jsxs)(B.a,{style:{width:"16rem"},className:"mb-5",children:[Object(P.jsx)(B.a.Img,{variant:"top",width:256,height:414,src:t.ImagePath}),Object(P.jsx)(B.a.Body,{className:"movie-card-body text-center",children:Object(P.jsx)(B.a.Title,{className:"movie-card-title",children:t.Title})}),Object(P.jsx)(B.a.Footer,{children:Object(P.jsx)(y.a,{size:"sm",block:!0,className:"profile-button remove-favorite",variant:"outline-danger",onClick:function(a){return e.handleRemoveFavorite(a,t._id)},children:"Remove from Favorites"})})]},t._id)}))]})]})}),Object(P.jsx)(G.a,{className:"tab-item",eventKey:"update",title:"Update",children:Object(P.jsxs)(B.a,{className:"update-card",children:[Object(P.jsxs)("h3",{className:"profile-title m-2",style:{color:"blue"},children:["Update ",n,"'s Profile"]}),Object(P.jsx)(B.a.Body,{children:Object(P.jsxs)(C.a,{noValidate:!0,validated:r,className:"update-form",onSubmit:function(t){return e.handleUpdate(t,e.Username,e.Password,e.Email,e.Birthday)},children:[Object(P.jsxs)(C.a.Group,{controlId:"formBasicUsername",children:[Object(P.jsx)(C.a.Label,{className:"form-label",children:"Username"}),Object(P.jsx)(C.a.Control,{type:"text",placeholder:"Change Username",onChange:function(t){return e.setUsername(t.target.value)},pattern:"[a-zA-Z0-9]{2,}"}),Object(P.jsx)(C.a.Control.Feedback,{type:"invalid",children:"Please enter a valid username with at least 2 alphanumeric characters."})]}),Object(P.jsxs)(C.a.Group,{controlId:"formBasicPassword",children:[Object(P.jsxs)(C.a.Label,{className:"form-label",children:["Password",Object(P.jsx)("span",{className:"required",children:"*"})]}),Object(P.jsx)(C.a.Control,{type:"password",placeholder:"Current or New Password",onChange:function(t){return e.setPassword(t.target.value)},pattern:".{2,}",required:!0}),Object(P.jsx)(C.a.Control.Feedback,{type:"invalid",children:"Please enter a valid password with at least 2 characters."})]}),Object(P.jsxs)(C.a.Group,{controlId:"formBasicEmail",children:[Object(P.jsx)(C.a.Label,{className:"form-label",children:"Email"}),Object(P.jsx)(C.a.Control,{type:"email",placeholder:"Change Email",onChange:function(t){return e.setEmail(t.target.value)}}),Object(P.jsx)(C.a.Control.Feedback,{type:"invalid",children:"Please enter a valid email address."})]}),Object(P.jsxs)(C.a.Group,{controlId:"formBasicBirthday",children:[Object(P.jsx)(C.a.Label,{className:"form-label",children:"Birthday"}),Object(P.jsx)(C.a.Control,{type:"date",placeholder:"MM-DD-YYYY",onChange:function(t){return e.setBirthday(t.target.value)}}),Object(P.jsx)(C.a.Control.Feedback,{type:"invalid",children:"Please enter a valid birthday."})]}),Object(P.jsx)(y.a,{className:"update profile-button",type:"submit",children:"Update"})]})})]})}),Object(P.jsx)(G.a,{className:"tab-item",eventKey:"delete",title:"Delete Profile",children:Object(P.jsxs)(B.a,{className:"update-card",children:[Object(P.jsxs)("h3",{className:"profile-title m-2",style:{color:"blue"},children:["Delete ",n,"'s Profile"]}),Object(P.jsx)(B.a.Body,{children:Object(P.jsx)(y.a,{className:"profile-button delete-button",variant:"danger",block:!0,onClick:function(t){return e.handleDeregister(t)},children:"Click Here If You're Sure You Want To Delete Your Profile"})})]})})]})})}}]),a}(n.a.Component),z=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("user");null!==e&&(this.props.setUser(t),this.getMovies(e))}},{key:"onLoggedIn",value:function(e){console.log(e),this.props.setUser(e.user.Username),localStorage.setItem("token",e.token),localStorage.setItem("user",e.user.Username),this.getMovies(e.token)}},{key:"onLogOut",value:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.open("/","_self")}},{key:"getMovies",value:function(e){var t=this;b.a.get("https://marvelix.herokuapp.com/movies",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){t.props.setMovies(e.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.movies,r=t.user;return a?Object(P.jsx)(v.BrowserRouter,{children:Object(P.jsxs)(O.a,{fluid:"md",className:"main-view",children:[r&&Object(P.jsxs)(f.a,{collapseOnSelect:!0,expand:"lg",bg:"primary",variant:"dark",className:"mb-5",children:[Object(P.jsx)(k.LinkContainer,{to:"/",children:Object(P.jsx)(f.a.Brand,{children:"MARVELIX"})}),Object(P.jsx)(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(P.jsx)(f.a.Collapse,{id:"responsive-navbar-nav",children:Object(P.jsxs)(g.a,{className:"mr-auto",children:[Object(P.jsx)(g.a.Item,{children:Object(P.jsx)(k.LinkContainer,{to:"/users/".concat(r),children:Object(P.jsx)(g.a.Link,{children:"Profile"})})}),Object(P.jsx)(g.a.Item,{children:Object(P.jsx)(y.a,{onClick:this.onLogOut,variant:"warning",type:"submit",className:"button logout",children:"Log Out"})})]})})]}),Object(P.jsx)(x.a,{className:"ml-0 mr-0 justify-content-around",children:Object(P.jsx)(p.d,{exact:!0,path:"/",render:function(){return r?Object(P.jsx)(U,{movies:a}):Object(P.jsx)(D,{onLoggedIn:function(t){return e.onLoggedIn(t)}})}})}),Object(P.jsx)(p.d,{path:"/register",render:function(){return Object(P.jsx)(F,{})}}),Object(P.jsx)(p.d,{exact:!0,path:"/movies/:movieId",render:function(e){var t=e.match;return Object(P.jsx)(M,{movie:a.find((function(e){return e._id===t.params.movieId}))})}}),Object(P.jsx)(p.d,{exact:!0,path:"/directors/:name",render:function(e){var t=e.match;return a?Object(P.jsx)(A,{director:a.find((function(e){return e.Director.Name===t.params.name})).Director}):Object(P.jsx)("div",{className:"main-view"})}}),Object(P.jsx)(p.d,{exact:!0,path:"/phases/:name",render:function(e){var t=e.match;return a?Object(P.jsx)(_,{phase:a.find((function(e){return e.Phase.Name===t.params.name})).Phase}):Object(P.jsx)("div",{className:"main-view"})}}),Object(P.jsx)(p.d,{exact:!0,path:"/users/:username",render:function(){return r?0!==a.length?Object(P.jsx)(R,{movies:a}):void 0:Object(P.jsx)(D,{onLoggedIn:function(t){return e.onLoggedIn(t)}})}})]})}):Object(P.jsx)("div",{className:"main-view",children:"LOADING"})}}]),a}(n.a.Component),V=Object(o.b)((function(e){return{movies:e.movies,user:e.user}}),{setMovies:function(e){return{type:w,value:e}},setUser:function(e){return{type:I,value:e}}})(z);var K=Object(i.combineReducers)({visibilityFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return t.value;default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.value;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return t.value;default:return e}}}),H=Object(i.createStore)(K,Object(l.devToolsEnhancer)());var X=function(){return Object(P.jsx)(o.a,{store:H,children:Object(P.jsx)(V,{})})},q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,113)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))};c.a.render(Object(P.jsx)(n.a.StrictMode,{children:Object(P.jsx)(X,{})}),document.getElementById("root")),q()},79:function(e,t,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.b9dc2b1b.chunk.js.map